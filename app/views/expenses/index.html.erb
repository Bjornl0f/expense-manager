<h1>Витрати</h1>

<div class="mb-3">
  <%= link_to "Нова витрата", new_expense_path, class: "btn btn-primary" %>
</div>

<div class="card">
  <div class="card-body">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Дата</th>
          <th>Сума</th>
          <th>Опис</th>
          <th>Платник</th>
          <th>Категорії</th>
          <th>Способи оплати</th>
          <th>Дії</th>
        </tr>
      </thead>
      <tbody>
        <% @expenses.each do |expense| %>
          <tr>
            <td><%= expense.date.strftime("%d.%m.%Y") %></td>
            <td><%= number_to_currency(expense.amount, unit: "₴") %></td>
            <td><%= truncate(expense.description, length: 50) %></td>
            <td><%= expense.spender&.name || "Не вказано" %></td>
            <td>
              <% expense.categories.each do |category| %>
                <span class="badge bg-info"><%= category.name %></span>
              <% end %>
            </td>
            <td>
              <% expense.payment_methods.each do |payment_method| %>
                <span class="badge bg-secondary"><%= payment_method.name %></span>
              <% end %>
            </td>
            <td>
              <%= link_to "Детальніше", expense, class: "btn btn-sm btn-info" %>
              <%= link_to "Редагувати", edit_expense_path(expense), class: "btn btn-sm btn-warning" %>
              <%= link_to "Видалити", expense, method: :delete, data: { turbo_method: :delete, turbo_confirm: "Ви впевнені?" }, class: "btn btn-sm btn-danger" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>